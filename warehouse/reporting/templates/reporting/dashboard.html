{% extends 'admin/index.html' %}

{% block content %}
<div id="content-main">
    <h1>Recent Syncs</h1>
    <p>Data is this dashboard is only as up-to-date as the most recent sync for any given site.</p>
    <table>
        <tr>
            <th>Domain</th>
            <th>Start</th>
            <th>End</th>
            <th>Completed?</th>
        </tr>
    {% for sync in last_syncs %}
    <tr>
        <td>{{sync.site.domain}}</td>
        <td>{{sync.start_time}}</td>
        <td>{{sync.end_time}}</td>
        <td>{{sync.completed}}</td>
    </tr>
    {% endfor %}
    </table>
    <br/>

    <!--<h1># of assets per site</h1>-->
    <!--<table>-->
        <!--<tr>-->
            <!--<th>Domain</th>-->
            <!--<th>Assets</th>-->
        <!--</tr>-->
    <!--{% for site in num_assets_by_site %}-->
    <!--<tr>-->
        <!--<td>{{site.domain}}</td>-->
        <!--<td>{{site.count}}</td>-->
    <!--</tr>-->
    <!--{% endfor %}-->
    <!--</table>-->
    <!--<br/>-->

    <h1>Total usage per site</h1>
    <table>
        <tr>
            <th>Domain</th>
            <th>Total Size</th>
            <th>Assets</th>
            <th>Transcodes</th>
            <th>Uploaders</th>
        </tr>
    {% for site in size_by_site %}
    <tr>
        <td>{{site.domain}}</td>
        <td>{{site.size|filesizeformat}}</td>
        <td>{{site.count}}</td>
        <td>{{site.transcodes}}</td>
        <td>{{site.uploaders}}</td>
    </tr>
    {% endfor %}
    </table>
    <br/>

    <!--<h1># uploaders per site</h1>-->
    <!--<table>-->
        <!--<tr>-->
            <!--<th>Domain</th>-->
            <!--<th>Uploaders</th>-->
        <!--</tr>-->
    <!--{% for site in num_uploaders_by_site %}-->
    <!--<tr>-->
        <!--<td>{{site.domain}}</td>-->
        <!--<td>{{site.uploaders}}</td>-->
    <!--</tr>-->
    <!--{% endfor %}-->
    <!--</table>-->
    <!--<br/>-->

    <h1>Top uploaders</h1>
    {{ uploader_by_site}}
    <table>
        <tr>
            <th>Domain</th>
            <th>User</th>
            <th>Uploads</th>
        </tr>
    {% for site in top_uploaders%}
    <tr>
        <td>{{site.domain}}</td>
        <td>{{site.asset__username}}</td>
        <td>{{site.count}}</td>
    </tr>
    {% endfor %}
    </table>
    <br/>

</div>
{% endblock %}
